<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:fragment="title">Kawasaki Services</title>
    <th:block th:fragment="headLinks">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    </th:block>
</head>
<body>

<nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" th:href="@{/}">Kawasaki Services</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">

                <li class="nav-item">
                    <a class="nav-link" th:href="@{/}">Inicio</a>
                </li>


                <!-- Enlace a Favoritos visible para usuarios autenticados -->
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <a class="nav-link" th:href="@{/favoritos/ver}">Favoritos</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" th:href="@{/compras/historial}">Mis Compras</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/carrito/ver}">游</a>
                </li>

                <li class="nav-item mx-2">
                    <span class="nav-link text-white-50">|</span>
                </li>

                <!-- Enlace visible solo para ADMIN: Productos (Panel) -->
                <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                    <a class="nav-link text-info" th:href="@{/productos/listar}">Productos (Panel)</a>
                </li>

                <!-- Enlace visible solo para ADMIN: Estad칤sticas -->
                <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                    <a class="nav-link text-info" th:href="@{/estadisticas}">Estad칤sticas</a>
                </li>

                <!-- Usuario autenticado: dropdown simplificado sin opciones de gesti칩n CRUD (esas est치n en el navbar para ADMIN) -->
                <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
                    <a class="nav-link dropdown-toggle text-warning" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Hola, <span sec:authentication="name">Usuario</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDropdown">
<!--                        <li><a class="dropdown-item" th:href="@{/panel}">Panel de Usuario</a></li>-->
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <form th:action="@{/logout}" method="post" style="display:inline;">
                                <button class="dropdown-item text-danger" type="submit">Cerrar Sesi칩n</button>
                            </form>
                        </li>
                    </ul>
                </li>

                <!-- Para usuarios an칩nimos: iniciar sesi칩n y registrarse -->
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" th:href="@{/login}">Iniciar Sesi칩n</a>
                </li>
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" th:href="@{/registro}">Registrarse</a>
                </li>

            </ul>
        </div>
    </div>
</nav>


<footer th:fragment="footer" class="mt-4">
    <div class="container-fluid py-4" style="background: linear-gradient(135deg, #0a5c2c 0%, #0d7236 100%); color: #fff;">
        <div class="container">
            <div class="row">
                <!-- Columna 1: Informaci칩n de la empresa -->
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3">
                        <i class="bi bi-shop me-2"></i>Kawasaki Tienda Oficial
                    </h5>
                    <p class="mb-3" style="color: #e0f7e9;">
                        Distribuidor autorizado de motocicletas, repuestos y accesorios Kawasaki.
                        Calidad y rendimiento desde 1974.
                    </p>
                    <div class="social-icons">
                        <a href="#" class="text-white me-3 fs-5"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="text-white me-3 fs-5"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="text-white me-3 fs-5"><i class="bi bi-twitter-x"></i></a>
                        <a href="#" class="text-white me-3 fs-5"><i class="bi bi-youtube"></i></a>
                        <a href="#" class="text-white fs-5"><i class="bi bi-whatsapp"></i></a>
                    </div>
                </div>

                <!-- Columna 2: Enlaces r치pidos -->
                <div class="col-md-2 mb-4">
                    <h6 class="fw-bold mb-3">COMPRAR</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Motocicletas Nuevas</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Seminuevos</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Accesorios</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Repuestos</a></li>
                        <li><a href="#" class="text-white text-decoration-none">Promociones</a></li>
                    </ul>
                </div>

                <!-- Columna 3: Soporte -->
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold mb-3">SOPORTE</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Centro de Servicio</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Garant칤a</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Manuales y Gu칤as</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Preguntas Frecuentes</a></li>
                        <li><a href="#" class="text-white text-decoration-none">Solicitar Cotizaci칩n</a></li>
                    </ul>
                </div>

                <!-- Columna 4: Contacto -->
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold mb-3">CONTACTO</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="bi bi-geo-alt me-2"></i>
                            Av. Motor 1234, Ciudad Kawasaki
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-telephone me-2"></i>
                            +1 (800) KAW-ASAKI
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-envelope me-2"></i>
                            ventas@kawasakitienda.com
                        </li>
                        <li>
                            <i class="bi bi-clock me-2"></i>
                            Lunes a Viernes: 9:00 - 18:00
                        </li>
                    </ul>
                    <button class="btn btn-outline-light btn-sm mt-2">
                        <i class="bi bi-chat-dots me-1"></i> Chat en Vivo
                    </button>
                </div>
            </div>

            <hr style="border-color: rgba(255,255,255,0.2);">

            <!-- Fila inferior: Copyright y enlaces legales -->
            <div class="row pt-2">
                <div class="col-md-6 text-md-start text-center mb-2">
                    <p class="mb-0" style="color: #c8e6d1;">
                        춸 2025 Kawasaki Tienda Oficial.
                    </p>
                </div>
                <div class="col-md-6 text-md-end text-center">
                    <a href="#" class="text-white text-decoration-none me-3">Pol칤tica de Privacidad</a>
                    <a href="#" class="text-white text-decoration-none me-3">T칠rminos y Condiciones</a>
                    <a href="#" class="text-white text-decoration-none">Aviso Legal</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts comunes al final de la p치gina -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script adicional para mejoras interactivas -->
    <script>
        // Efecto hover para enlaces del footer
        document.addEventListener('DOMContentLoaded', function() {
            const footerLinks = document.querySelectorAll('footer a');
            footerLinks.forEach(link => {
                link.addEventListener('mouseenter', function() {
                    this.style.color = '#ffd700';
                    this.style.transition = 'color 0.3s';
                });
                link.addEventListener('mouseleave', function() {
                    this.style.color = 'white';
                });
            });
        });
    </script>
</footer>


<script th:inline="javascript">
    var isAuthenticated = /*[[${#authentication.principal != null}]]*/ false;
    var hasAdminRole = /*[[${#authorization.expression("hasRole('ADMIN')")}]]*/ false;

    document.addEventListener('DOMContentLoaded', function() {
        var requireAuth = document.body.getAttribute('data-require-auth');
        var requireRole = document.body.getAttribute('data-require-role');

        if (requireAuth === 'true' && !isAuthenticated) {
            window.location.href = '/login';
        }

        if (requireRole && requireRole === 'ADMIN' && !hasAdminRole) {
            window.location.href = /*[[${@request.contextPath}]]*/ '/login';
        }
    });
/*]]>*/
</script>

</body>
</html>

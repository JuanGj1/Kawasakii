<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>EstadÃ­sticas de Ventas | Kawasaki Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/estilos.css}">
</head>
<body>


<main class="container mt-5">
    <h2 class="text-center mb-4">ðŸ“ˆ Resumen de Ventas y EstadÃ­sticas</h2>

    <div class="row">
        <div class="col-md-10 offset-md-1">
            <div class="card p-4 card-shadow-neon">
                <h3 class="card-title text-center" style="color: var(--kawasaki-green);">Ventas Mensuales</h3>
                <canvas id="ventasChart"></canvas>
            </div>
        </div>
    </div>

    <div class="text-center mt-5">
        <a th:href="@{/productos/listar}" class="btn btn-outline-info">Volver al Panel de Productos</a>
    </div>
</main>

<script th:inline="javascript">
    // Obtener los datos del modelo de Spring
const meses = /*[[${meses}]]*/ [];
const ventas = /*[[${ventas}]]*/ [];

// AsegÃºrate de que los arrays no estÃ©n vacÃ­os antes de dibujar
if (meses.length > 0 && ventas.length > 0) {

    const ctx = document.getElementById('ventasChart').getContext('2d');

    new Chart(ctx, {
        type: 'bar', // Tipo de grÃ¡fica: barras
        data: {
            labels: meses, // Eje X: Meses
            datasets: [{
                label: 'Ventas Totales (MXN)',
                data: ventas, // Eje Y: Monto de las ventas
                backgroundColor: 'rgba(0, 255, 153, 0.7)', // Verde neÃ³n
                borderColor: 'rgba(0, 255, 153, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Monto de Venta (MXN)',
                        // ðŸš¨ Letra del tÃ­tulo del eje Y: NEGRO ðŸš¨
                        color: '#000000'
                    },
                    ticks: {
                        // ðŸš¨ NÃºmeros del eje Y: NEGRO ðŸš¨
                        color: '#000000'
                    },
                    grid: {
                        // La grilla se mantiene clara para que no opaque el fondo claro de la tarjeta
                        color: 'rgba(0, 0, 0, 0.1)'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'PerÃ­odo',
                        // ðŸš¨ Letra del tÃ­tulo del eje X: NEGRO ðŸš¨
                        color: '#000000'
                    },
                    ticks: {
                        // ðŸš¨ Etiquetas de meses: NEGRO ðŸš¨
                        color: '#000000'
                    },
                    grid: {
                        color: 'rgba(0, 0, 0, 0.1)'
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        // ðŸš¨ Letra de la leyenda (Ventas Totales): NEGRO ðŸš¨
                        color: '#000000'
                    }
                }
            }
        }
    });
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>